<div class="table-container">
	<table>
		<thead>
			<tr>
				<th *ngFor="let col of columns" (click)="setSort(col.key)" style="cursor:pointer">
					{{ col.label }}
					<span *ngIf="sortColumn === col.key">
						{{ sortDirection === 'asc' ? '▲' : '▼' }}
					</span>
				</th>
				<th *ngIf="hasActions">Akcije</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let row of pagedData" 
			    [class.clickable]="rowClickable" 
			    (click)="onRowClick(row)">
				<td *ngFor="let col of columns">
					{{ row[col.key] }}
				</td>
				<td *ngIf="hasActions" class="actions-cell">
					<button *ngFor="let action of actions" 
					        class="action-btn"
					        [class]="'btn-' + (action.color || 'primary')"
					        (click)="onActionClick(action, row, $event)">
						{{ action.label }}
					</button>
				</td>
			</tr>
			<tr *ngIf="pagedData.length === 0">
				<td [attr.colspan]="columns.length + (hasActions ? 1 : 0)" style="text-align:center">No data</td>
			</tr>
		</tbody>
	</table>
	
	<div class="table-actions">
		<button (click)="openDownloadModal()" class="hero-btn download-btn">Preuzmi</button>
	</div>
</div>

<div class="modal-overlay" *ngIf="showDownloadModal" (click)="closeDownloadModal()">
	<div class="modal-content" (click)="$event.stopPropagation()">
		<div class="modal-header">
			<h3>Izaberite format za preuzimanje</h3>
			<button class="close-btn" (click)="closeDownloadModal()">&times;</button>
		</div>
		<div class="modal-body">
			<div class="format-buttons">
				<button (click)="downloadAs('xml')" class="format-btn xml-btn">
					<span class="format-icon">📄</span>
					XML
				</button>
				<button (click)="downloadAs('pdf')" class="format-btn pdf-btn">
					<span class="format-icon">📄</span>
					PDF
				</button>
			</div>
		</div>
	</div>
</div>

<div class="pagination" *ngIf="totalPages > 1">
	<button class="pagination-btn" (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">
		<span>←</span> Nazad
	</button>
	<span class="pagination-info">Strana {{ currentPage }} od {{ totalPages }}</span>
	<button class="pagination-btn" (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">
		Napred <span>→</span>
	</button>
</div>
