<div class="app-layout">
  <mat-toolbar color="primary" class="main-header">
    <button mat-icon-button (click)="toggleDrawer()" *ngIf="!((isAuthenticated$ | async) && isStudent())">
      <mat-icon>menu</mat-icon>
    </button>
    <a routerLink="/homepage" class="toolbar-title">LMS Univerzitet</a>
    <span class="spacer"></span>
    
    <!-- Dugmad kada nije ulogovan -->
    <ng-container *ngIf="!(isAuthenticated$ | async)">
      <button mat-button routerLink="/login">Login</button>
      <button mat-button routerLink="/register">Registracija</button>
    </ng-container>
    
    <!-- Dugme kada je ulogovan -->
    <ng-container *ngIf="isAuthenticated$ | async">
      <button mat-button (click)="logout()">Odjavi se</button>
    </ng-container>
  </mat-toolbar>

  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav #drawer mode="side" [opened]="(isAuthenticated$ | async) && isStudent() ? true : isDrawerOpened" class="sidenav">
      
      <div class="nav-section" *ngIf="(isAuthenticated$ | async) && isStudent()">
        <h4 class="section-title">Student Panel</h4>
        <mat-nav-list class="custom-nav-list">
          <a mat-list-item routerLink="/student-homepage" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">dashboard</mat-icon>
            <span class="nav-text">Portal</span>
          </a>
          <a mat-list-item routerLink="/homepage" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">home</mat-icon>
            <span class="nav-text">Glavna strana</span>
          </a>
          <a mat-list-item routerLink="/profil" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">person</mat-icon>
            <span class="nav-text">Profil</span>
          </a>
          <a mat-list-item routerLink="/predmeti" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">school</mat-icon>
            <span class="nav-text">Predmeti</span>
          </a>
          <a mat-list-item routerLink="/obavestenja" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">notifications</mat-icon>
            <span class="nav-text">Obavestenja</span>
          </a>
          <a mat-list-item routerLink="/istorija" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">history</mat-icon>
            <span class="nav-text">Istorija</span>
          </a>
          <a mat-list-item routerLink="/prijava-ispita" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">assignment</mat-icon>
            <span class="nav-text">Prijava ispita</span>
          </a>
        </mat-nav-list>
      </div>

      <div class="nav-section" *ngIf="!((isAuthenticated$ | async) && isStudent())">
        <h4 class="section-title">Navigacija</h4>
        <mat-nav-list class="custom-nav-list">
          <a mat-list-item routerLink="/homepage" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">home</mat-icon>
            <span class="nav-text">Home</span>
          </a>
          <a mat-list-item routerLink="/fakulteti" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">business</mat-icon>
            <span class="nav-text">Fakulteti</span>
          </a>
          <!-- TODO: Ispraviti ovde teaching-materials na srpskom-->
          <a mat-list-item routerLink="/nastavni-materijali" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">library_books</mat-icon>
            <span class="nav-text">Nastavni materijali</span>
          </a>
          <a mat-list-item routerLink="/studenti" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">people</mat-icon>
            <span class="nav-text">Studenti</span>
          </a>
        </mat-nav-list>
      </div>

      <div class="nav-section" *ngIf="(isAuthenticated$ | async) && !isStudent()">
        <h4 class="section-title">Nalog</h4>
        <mat-nav-list class="custom-nav-list">
          <a mat-list-item routerLink="/profil" class="nav-item" routerLinkActive="active">
            <mat-icon class="nav-icon">person</mat-icon>
            <span class="nav-text">Profil</span>
          </a>
        </mat-nav-list>
      </div>
    </mat-sidenav>

    <mat-sidenav-content class="main-content">
      <div class="container">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
